<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>SISTEMA NEONATAL INTEGRAL v18.0 - HSVP</title>
    <style>
        :root { --primary: #2c3e50; --secondary: #3498db; --accent: #27ae60; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); padding: 10px; font-size: 11px; }
        .container { max-width: 1400px; margin: auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); border-top: 10px solid var(--primary); }
        h2 { background: var(--primary); color: white; padding: 10px; border-radius: 5px; margin-top: 20px; font-size: 1.2em; text-transform: uppercase; }
        .adcav-grid { display: grid; grid-template-columns: 150px 1fr; gap: 10px; margin-bottom: 10px; border-bottom: 1px solid #eee; padding: 10px; }
        .letra { font-weight: bold; font-size: 1.4em; color: var(--secondary); display: flex; align-items: center; }
        .input-box { width: 100%; border: 1px solid #ccc; border-radius: 4px; padding: 8px; font-size: 11px; }
        .res-auto { background: #fffde7; border: 1px solid #ffd54f; padding: 8px; border-radius: 4px; font-family: 'Courier New', monospace; font-weight: bold; }
        .calc-card { background: #eef2f7; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .btn-main { background: var(--accent); color: white; padding: 20px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; }
        select { padding: 5px; border-radius: 4px; }
    </style>
</head>
<body>

<div class="container">
    <h1>PLAN DE MANEJO - ADCAVANDIMELCO (Neonatología HSVP)</h1>

    <div class="calc-card">
        <h3>Pre-Cálculos para Líquidos y Medicamentos</h3>
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;">
            <div><label>Peso (g):</label><input type="number" id="p" value="3000" oninput="actualizarTodo()"></div>
            <div><label>Líquidos (ml/kg/d):</label><input type="number" id="l" value="80" oninput="actualizarTodo()"></div>
            <div><label>VIG (mg/kg/min):</label><input type="number" id="v" value="4" step="0.1" oninput="actualizarTodo()"></div>
            <div><label>% Dextrosa:</label><select id="dex" onchange="actualizarTodo()"><option value="5">5%</option><option value="10" selected>10%</option><option value="12.5">12.5%</option></select></div>
        </div>
    </div>

    <div id="adcav-form">
        <div class="adcav-grid"><div class="letra">A</div><div><b>ADMISION:</b><textarea id="adm" class="input-box" rows="1">Ingreso a sala de Neonatología.</textarea></div></div>

        <div class="adcav-grid"><div class="letra">D</div><div><b>DIAGNOSTICO:</b><textarea id="diag" class="input-box" rows="2" placeholder="Se cargan de la sección anterior..."></textarea></div></div>

        <div class="adcav-grid"><div class="letra">C</div><div><b>CONDICION:</b>
            <select id="cond" onchange="updateText('cond','txt_cond')"><option>ESTABLE</option><option>INESTABLE</option><option value="OTRO">OTRO (Escribir)</option></select>
            <input type="text" id="txt_cond" class="input-box" style="margin-top:5px" placeholder="Detalle condición...">
        </div></div>

        <div class="adcav-grid"><div class="letra">A</div><div><b>ALERGIAS:</b>
            <select id="aler" onchange="updateText('aler','txt_aler')"><option>NO REFIERE</option><option>NEGATIVO</option><option value="OTRO">OTRO (Escribir)</option></select>
            <input type="text" id="txt_aler" class="input-box" style="margin-top:5px">
        </div></div>

        <div class="adcav-grid"><div class="letra">V</div><div><b>VITALES:</b>
            <select id="vit" onchange="addVit(this.value)"><option value="">Seleccione...</option><option>MONITOREO CONTINUO</option><option>CONTROL DE SIGNOS VITALES CADA 3 HORAS</option><option>CONTROL INGESTA EXCRETA</option><option>BALANCE HIDRICO</option><option>DIURESIS HORARIA</option></select>
            <textarea id="txt_vit" class="input-box" rows="2" style="margin-top:5px"></textarea>
        </div></div>

        <div class="adcav-grid"><div class="letra">A</div><div><b>ACTITUD:</b>
            <select id="act" onchange="updateText('act','txt_act')"><option>SEMIFOWLER</option><option>POSICION ANTIRREFLUJO</option><option value="OTRO">OTRO</option></select>
            <input type="text" id="txt_act" class="input-box" style="margin-top:5px">
        </div></div>

        <div class="adcav-grid"><div class="letra">D</div><div><b>DIETA:</b>
            <select id="diet" onchange="updateText('diet','txt_diet')"><option>NADA POR VIA ORAL</option><option>LECHE MATERNA EXCLUSIVA</option><option>LECHE MATERNA POR GAVAGE</option></select>
            <input type="text" id="txt_diet" class="input-box" style="margin-top:5px">
        </div></div>

        <div class="adcav-grid"><div class="letra">I</div><div><b>I.V.:</b><div id="res_iv" class="res-auto"></div></div></div>

        <div class="adcav-grid"><div class="letra">M</div><div><b>MEDICAMENTOS:</b>
            <div style="display:flex; gap:5px">
                <select id="med_sel"><option value="AMPICILINA|50|12">Ampicilina (50mg/kg)</option><option value="AMIKACINA|15|24">Amikacina (15mg/kg)</option><option value="GENTAMICINA|4|24">Gentamicina (4mg/kg)</option></select>
                <button onclick="calcMed()">+ Calcular e Inyectar en Plan</button>
            </div>
            <textarea id="txt_med" class="input-box" rows="3" style="margin-top:5px"></textarea>
        </div></div>

        <div class="adcav-grid"><div class="letra">E</div><div><b>EXAMENES:</b>
            <select onchange="addToList('txt_exa', this.value)"><option value="">Seleccione...</option><option>RADIOGRAFIA TORACOABDOMINAL</option><option>ECO TRANSFONTANELAR</option><option>ECO CARDIOGRAMA</option></select>
            <input type="text" id="txt_exa" class="input-box" style="margin-top:5px">
        </div></div>

        <div class="adcav-grid"><div class="letra">L</div><div><b>LABORATORIO:</b>
            <select onchange="addToList('txt_lab', this.value)"><option value="">Seleccione...</option><option>BIOMETRIA HEMATICA</option><option>GLUCOSA</option><option>GASOMETRIA</option><option>HEMOCULTIVO</option><option>EMO</option><option>TIPIFICACION</option></select>
            <input type="text" id="txt_lab" class="input-box" style="margin-top:5px">
        </div></div>

        <div class="adcav-grid"><div class="letra">C</div><div><b>INTERCONSULTA:</b><input type="text" id="int" class="input-box"></div></div>

        <div class="adcav-grid"><div class="letra">O</div><div><b>OTROS:</b><input type="text" id="otr" class="input-box"></div></div>
    </div>

    <button class="btn-main" style="margin-top:20px" onclick="generarFinal()">VISTA PREVIA FINAL PARA COPIAR</button>
</div>

<script>
    function actualizarTodo() {
        const pesoKg = parseFloat(document.getElementById('p').value) / 1000;
        const liqKg = parseFloat(document.getElementById('l').value);
        const vig = parseFloat(document.getElementById('v').value);
        const dexP = document.getElementById('dex').value;

        const vol24h = (liqKg * pesoKg).toFixed(1);
        const ritmo = (vol24h / 24).toFixed(1);

        // Formato pedido: DEXTROSA EN AGUA (% ESCOGIDO), PASAR INTRAVENOSO (ML CALCULADO), PASAR INTRAVENOSO EN 24 HORAS. 
        document.getElementById('res_iv').innerHTML = 
            `DEXTROSA EN AGUA AL ${dexP}%, PASAR INTRAVENOSO ${vol24h} ML, PASAR INTRAVENOSO EN 24 HORAS.<br>` +
            `VIG: ${vig} MG/KG/MIN`;
    }

    function calcMed() {
        const pesoKg = parseFloat(document.getElementById('p').value) / 1000;
        const [nombre, dosisUnit, freq] = document.getElementById('med_sel').value.split('|');
        const dosisTotal = (dosisUnit * pesoKg).toFixed(1);
        
        // Formato: MEDICAMENTO PASAR INTRAVENOSO (MG DOSIS), CADA (FRECUENCIA), (ML)ML
        // Simulación básica de ML (se asume dilución estándar 100mg/ml para el ejemplo)
        const ml = (dosisTotal / 100).toFixed(1); 
        const nuevaLinea = `${nombre} PASAR INTRAVENOSO ${dosisTotal} MG, CADA ${freq} HORAS, ${ml} ML\n`;
        document.getElementById('txt_med').value += nuevaLinea;
    }

    function updateText(selId, txtId) {
        const val = document.getElementById(selId).value;
        document.getElementById(txtId).value = val === "OTRO" ? "" : val;
    }

    function addVit(val) { if(val) document.getElementById('txt_vit').value += val + ". "; }
    function addToList(id, val) { if(val) document.getElementById(id).value += val + ", "; }

    window.onload = actualizarTodo;
</script>
</body>
</html>
